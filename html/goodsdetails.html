<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=s, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>商品详情</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/goodsdetails.css">
    <script src="../js/jquery-1.12.4.js"></script>
</head>
<style>
    .goods_messageSmall .selected{
        border:1px solid red;
    }
    .goods_color .active{
        border:1px solid red;
    }
    .goods_size .active{
    border:1px solid red;
    }
    #goods_price{
        font-size: 18px;
        font-weight: bolder;
        color: red;
    }
</style>
<body>
    <!-- 顶部搜索 -->
    <div></div>
    <!--导航  -->
    <div></div>
    <!-- 子碎片导航 -->
    <div class="goods_breadNav">
        <div class="goods_breadNavLink">
            <a href="">所有商品</a>">"
            <a href="">男装</a>">"
            <a href="">T恤</a>">"
            <a href="">短袖T恤</a>
        </div>
    </div>
    <!-- 商品信息 -->
    <div class="content">
       <div class="goods_message">
            <!-- 商品左侧图片信息 -->
            <div class="goods_messagePicture">
                <div class="goods_messageImage">
                    <!-- 大图 -->
                    <div class="goods_messageBig">
                        <!-- 阴影 -->
                        <span id="picture_shadow"></span>
                        <img src="../img/706211_00.jpg">
                    </div>
                    <!-- 放大镜 -->
                    <div class="more_picture">
                        <img src="../img/706211_00.jpg">
                    </div>
                    <!-- 小图 -->
                    <div class="goods_messageSmall">
                        <ul>
                            <li><img src="../img/706211_00.jpg" ></li>
                            <li><img src="../img/706211_30.jpg" ></li>
                            <li><img src="../img/706211_32.jpg"></li>
                            <li><img src="../img/706211_33.jpg"></li>
                            <li><img src="../img/706211_00.jpg"></li>
                        </ul>
                    </div>
                </div>
                <!-- 编号 -->
                <div class="productNum">
                    商品编号:<span id="productNum">1024</span>
                </div>
            </div>
            <!-- 商品右侧详细信息 -->
            <div class="goods_message_word">
                <!-- 右侧头部 -->
                <div class="goods_messageWordTitle">
                    <a href="" target="_blank">METERSBONWE</a>
                    <span id="goods_name">男MTEE迪士尼漫威漫画table印花圆领恤</span>
                </div>
                <!-- 价格 -->
                <div class="goods_message_price">
                    <ul>
                        <li>
                            <b>售价:</b>
                            <strong id="goods_price">￥45.9</strong>&nbsp;
                            <b>吊牌价:</b>
                            <em id="original_price">￥99</em>
                            <span>4.6折</span>    
                        </li>
                        <li>
                            <div style="float:left; ">本品不参加vip，svip折扣</div>
                            <div class="member_rules"><i>会员规则</i>
                                <div class="rules_message">
                                    在有效期1年内：<br>
                                    累计购物满1000元则升级为VIP；未满1000元则降为普通会员。<br>
                                    在有效期1年内：<br>
                                    累计购物满2000元则升级为SVIP；如累计购物1000~1999元，则降为VIP；如累计购物未满1000元则降为普通会员。
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- 销量 积分 -->
                <div class="goods_detailInfo">
                    <!-- 销量 -->
                    <div class="goods_sale first">
                        销量：<span id="goods_sale">1</span>
                    </div>
                    <!-- 评价 -->
                    <div class="goods_user">
                        累计评价：<span id="goods_user">3</span>
                    </div>
                    <!-- 积分 -->
                    <div class="goods_integral">
                        积分：<span id="goods_integral">2</span>
                    </div>
                </div>
                <!-- 颜色 -->
                <div class="goods_color">
                    <dl>
                        <!-- 设置锚点 -->
                        <dt>颜色:<span id="selectedColor">请选择颜色</span></dt>
                        <dd>
                            <img src="../img/706211_00.jpg" dataname="白色" >
                        </dd>
                        <dd>
                            <img src="../img/706211_80_00.jpg" dataname="橙色">
                        </dd>
                    </dl>
                </div>
                <!-- 尺码 -->
                <div class="goods_size">
                    <dl>
                        <!-- 设置锚点 -->
                        <dt>尺码：<span id="selectedSize" >请选择尺码</span><a class="assistant" href="#assistant">尺码选择助手</a></dt>
                        <dd>
                            <div class="size_170">M:170/92A</div>
                            <div class="size_175">M:175/96A</div>
                            <div class="size_180">M:180/100A</div>
                        </dd>
                    </dl>    
                </div>
                <!-- 购买数量 -->
                <div class="goods_num">
                    <dl>
                        <dt>购买数量:</dt>
                        <dd>
                            <!-- 减 -->
                            <button id="minus">-</button>
                            <input id="num" type="text" value="1">
                            <button id="add">+</button>
                            <p id="num_reminder" style="display:none;">至少需要一件</p>
                        </dd>
                    </dl>
                </div>
            </div>
            <!-- 加入购物车 --> 
            <button id="addCar">加入购物袋</button>
       </div> 
    </div>  
</body>
<script> 
    glass();
    /* 放大镜 */
    function glass() {
        var shadowWidth = $("#picture_shadow").width(),
        shadowHeight = $("#picture_shadow").height(),
        middleWidth = $(".goods_messageBig").width(),
        middleHeight = $(".goods_messageBig").height(),
        bigWidth = $(".more_picture").width(),
        bigHeight = $(".more_picture").height();
        var rateX = bigWidth/shadowWidth;
        var rateY = bigHeight/shadowHeight;
        $(".goods_messageBig").mouseover(function(){
            $("#picture_shadow").show();
            $(".more_picture").show();
        }).mousemove(function(e){
            //阴影跟随鼠标移动
            var x = e.pageX,y = e.pageY;
            $("#picture_shadow").offset({
                top:y-shadowHeight/2,
                left:x-shadowWidth/2
            });
            //限制阴影的移动范围
            var moveRange = $("#picture_shadow").position(),
            _top = moveRange.top,
            _left = moveRange.left,
            maxTop = middleHeight - shadowHeight,
            maxLeft = middleWidth - shadowWidth;
            if (_top < 0) {
                _top = 0;
            } else if(_top > maxTop){
                _top = maxTop;
            }
            if (_left < 0) { 
                _left = 0; 
            } else if(_left> maxLeft){
                _left = maxLeft;
            }
            $("#picture_shadow").css({
                top:_top,
                left:_left
            });
            //大图内的图片跟随阴影内图片进行变化
            $(".more_picture img").css({
                top:-rateY*_top,
                left:-rateX*_left
            });
        });
        $(".goods_messageBig").mouseout(function(){
            $("#picture_shadow").hide();
            $(".more_picture").hide();
        });
    }
    /* 会员规则 */
    $(".member_rules").hover(function(){
        $(".rules_message").show();
    },function(){
        $(".rules_message").hide();
    })
    /* 选图片 */
    $(".goods_messageSmall ul li").on("click",function(){
        $(this).addClass("selected").siblings().removeClass("selected");
        var thisSrc = $(this).children(0).attr("src");
        $(".goods_messageBig img").attr("src",thisSrc);
        $(".more_picture img").attr("src",thisSrc);
    });
    /* 选择颜色 */
    $(".goods_color dl dd").on("click",function(){
        if($(this).hasClass("active")){
            $(this).removeClass("active");
            $("#selectedColor").html("请选择颜色");
        }else{
           $(this).addClass("active").siblings().removeClass("active");
            var thisName = $(this).children(0).attr("dataname");
            $("#selectedColor").html(thisName);
            var thisSrc = $(this).children(0).attr("src");
            $(".goods_messageBig img").attr("src",thisSrc);
            $(".more_picture img").attr("src",thisSrc); 
        }  
    });
    /* 选择尺码 */
    $(".goods_size dl dd div").on("click",function(){
        if($(this).hasClass("active")){
            $(this).removeClass("active");
            $("#selectedSize").html("请选择尺码");
        }else{
            $(this).addClass("active").siblings().removeClass("active");
            var thishtml = $(this).html();
            $("#selectedSize").html(thishtml);
        }
    });
    /* 数量 */
    Number();
    function Number(){
        var minus = document.getElementById("minus");
        var num = document.getElementById("num");
        var add = document.getElementById("add"); 
        var reminder = document.getElementById("num_reminder");
        minus.onclick = function(){
            var minusNum = num.value;
            if (minusNum > 1) {
                minusNum--;
                num.value = minusNum;
            }else{
                reminder.style = "display:block";
                setTimeout(function(){
                    reminder.style = "display:none";
                }, 1000);  
            }
        }
        add.onclick = function(){
            var addNum = num.value;
            addNum++;
            num.value = addNum;
        }
    }
    /* 加入购物车 */
    $("#addCar").on("click",function(){
        /* 创建对象存储需要传的值 转化为json字符串格式*/
        var details = new Object();
        details.shopname = $("#goods_name").html();
        details.goods_price = $("#goods_price").html();
        details.original_price = $("#original_price").html();
        details.num = $("#num").val();
        details.color = $(".goods_color .active").children(0).attr("dataname");
        details.shopimg = $(".goods_color .active").children(0).attr("src");
        details.size = $(".goods_size .active").html();
        var jsondetails = JSON.stringify(details);
    });
</script>
</html>